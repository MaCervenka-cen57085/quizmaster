{
  // QuizMaster (Apple Intel / x86_64) single-container development environment
  // Uses the prebuilt multi-arch image that bundles: Java 21, Node 22 + pnpm, PostgreSQL 16, Playwright
  // This sets up Java 21, Node 22 + pnpm, PostgreSQL 16, and Playwright automatically in a single container.
  "name": "QuizMaster (Apple Intel / x86_64 Container)",
  // Use a local image tag (same pattern as Apple Silicon) and build it if missing
  "image": "quizmaster-dev-apple-intel:latest",
  "initializeCommand": "bash -lc 'docker image inspect quizmaster-dev-apple-intel:latest >/dev/null 2>&1 || docker build -t quizmaster-dev-apple-intel:latest -f .devcontainer/apple-intel/Dockerfile .devcontainer/apple-intel'",
  "remoteUser": "vscode",
  "runArgs": [
    "--name", "QuizMaster-Dev",
    "-v", "quizmaster-postgres-data:/var/lib/postgresql/data"
  ],
  "overrideCommand": true,
  "forwardPorts": [2222, 3333, 5173, 5432, 8080],
  // Start bundled services (PostgreSQL, etc.) when the container starts
  "postStartCommand": "/usr/local/bin/services.sh",
  // Run minimal, non-interactive dependency setup inside the container after it is created (mirror Silicon)
  "postCreateCommand": "bash -lc 'cd frontend && pnpm ci:install'",
  // Environment parity with Apple Silicon definition
  "containerEnv": {
    "DB_HOST": "localhost",
    "DB_NAME": "quizmaster",
    "DB_USER": "quizmaster",
    "DB_PASS": "quizmaster",
    "FEATURE_FLAG": "false"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "EditorConfig.EditorConfig",
        "GitHub.copilot",
        "GitHub.copilot-chat",
        "vscode.vscode-java-pack",
        "ms-playwright.playwright",
        "alexkrechik.cucumberautocomplete"
      ]
    }
  }
}


